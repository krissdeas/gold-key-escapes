<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog Admin | Gold Key Escapes</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    
    <script>
        // Register custom preview styles to match the main website
        CMS.registerPreviewStyle("https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap");
        
        // Custom CSS that matches the Gold Key Escapes website
        const previewStyles = `
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
                color: #1A1A1A;
                line-height: 1.6;
                background: #FDFCFA;
                padding: 48px;
                max-width: 800px;
                margin: 0 auto;
                -webkit-font-smoothing: antialiased;
            }
            
            .featured-image {
                width: calc(100% + 96px);
                margin: -48px -48px 40px -48px;
                height: 300px;
                object-fit: cover;
            }
            
            .category {
                display: inline-block;
                padding: 8px 18px;
                background: rgba(201, 169, 98, 0.12);
                color: #C9A962;
                font-size: 11px;
                font-weight: 700;
                letter-spacing: 0.12em;
                text-transform: uppercase;
                border-radius: 100px;
                margin-bottom: 20px;
            }
            
            h1 {
                font-family: 'Cormorant Garamond', Georgia, serif;
                font-size: 42px;
                font-weight: 600;
                color: #1A1A1A;
                line-height: 1.15;
                letter-spacing: -0.02em;
                margin-bottom: 20px;
            }
            
            .meta {
                display: flex;
                align-items: center;
                gap: 20px;
                font-size: 14px;
                color: #999;
                margin-bottom: 36px;
                padding-bottom: 36px;
                border-bottom: 1px solid #EAEAEA;
            }
            
            h2 {
                font-family: 'Cormorant Garamond', Georgia, serif;
                font-size: 32px;
                font-weight: 600;
                color: #1A1A1A;
                margin: 48px 0 20px;
                letter-spacing: -0.02em;
                line-height: 1.2;
            }
            
            h3 {
                font-size: 22px;
                font-weight: 600;
                color: #1A1A1A;
                margin: 36px 0 16px;
                line-height: 1.3;
            }
            
            p {
                font-size: 17px;
                color: #4A4A4A;
                line-height: 1.9;
                margin-bottom: 24px;
            }
            
            a {
                color: #C9A962;
                text-decoration: none;
                font-weight: 500;
            }
            
            strong {
                font-weight: 600;
                color: #1A1A1A;
            }
            
            ul, ol {
                margin: 24px 0;
                padding-left: 28px;
            }
            
            li {
                font-size: 17px;
                color: #4A4A4A;
                line-height: 1.8;
                margin-bottom: 12px;
            }
            
            blockquote {
                border-left: 4px solid #C9A962;
                padding: 20px 0 20px 28px;
                margin: 36px 0;
                background: rgba(201, 169, 98, 0.05);
                border-radius: 0 12px 12px 0;
            }
            
            blockquote p {
                font-size: 18px;
                font-style: italic;
                color: #555;
                margin-bottom: 0;
            }
            
            img {
                max-width: 100%;
                border-radius: 16px;
                margin: 32px 0;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }
            
            hr {
                border: none;
                height: 1px;
                background: #EAEAEA;
                margin: 48px 0;
            }
        `;
        
        CMS.registerPreviewStyle(previewStyles, { raw: true });

        // Custom Preview Template for Blog Posts
        const BlogPostPreview = createClass({
            render: function() {
                const entry = this.props.entry;
                const title = entry.getIn(['data', 'title']) || 'Untitled Post';
                const category = entry.getIn(['data', 'category']) || 'Travel Tips';
                const date = entry.getIn(['data', 'date']);
                const readTime = entry.getIn(['data', 'readTime']) || '5 min read';
                const image = entry.getIn(['data', 'image']);
                const body = this.props.widgetFor('body');
                
                let formattedDate = 'No date set';
                if (date) {
                    const dateObj = new Date(date);
                    formattedDate = dateObj.toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                }

                const imageUrl = image ? this.props.getAsset(image).toString() : null;

                return h('div', {},
                    imageUrl ? h('img', { 
                        src: imageUrl, 
                        className: 'featured-image',
                        alt: title 
                    }) : null,
                    h('span', { className: 'category' }, category),
                    h('h1', {}, title),
                    h('div', { className: 'meta' },
                        h('span', {}, 'üìÖ ' + formattedDate),
                        h('span', {}, '‚è± ' + readTime)
                    ),
                    h('div', { className: 'content' }, body)
                );
            }
        });

        CMS.registerPreviewTemplate('blog', BlogPostPreview);
    </script>
</body>
</html>
